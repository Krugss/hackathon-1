<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î°úÍ∑∏Ïù∏ - Îü∞ÎãùÌè¨Ïù∏Ìä∏</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        @keyframes floatSlow {
            0%, 100% {
                transform: translateY(0px) translateX(0px);
            }
            50% {
                transform: translateY(-15px) translateX(10px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.2;
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cloud-shape {
            filter: blur(20px);
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // API Í∏∞Î≥∏ ÏÑ§Ï†ï
        const API_BASE_URL = 'http://localhost:8082/api';

        // Íµ¨Î¶Ñ ÏïÑÏù¥ÏΩò SVG Ïª¥Ìè¨ÎÑåÌä∏
        const CloudIcon = ({ className, style }) => (
            <svg 
                className={className}
                style={style}
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="1"
            >
                <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z" />
            </svg>
        );

        // Îü¨ÎÑà ÏïÑÏù¥ÏΩò SVG
        const RunnerIcon = ({ className, style }) => (
            <svg 
                className={className}
                style={style}
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2"
            >
                <circle cx="12" cy="5" r="2" />
                <path d="M10 22v-5l-1-1v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4l-1 1v5" />
                <path d="m8 12-2 2" />
                <path d="m16 12 2 2" />
            </svg>
        );

        // Ïù¥Î©îÏùº ÏïÑÏù¥ÏΩò SVG
        const MailIcon = ({ className, style }) => (
            <svg 
                className={className}
                style={style}
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2"
            >
                <rect x="2" y="4" width="20" height="16" rx="2" />
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
            </svg>
        );

        // ÏûêÎ¨ºÏá† ÏïÑÏù¥ÏΩò SVG
        const LockIcon = ({ className, style }) => (
            <svg 
                className={className}
                style={style}
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2"
            >
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
        );

        // Îàà ÏïÑÏù¥ÏΩò SVG
        const EyeIcon = ({ className, style, onClick }) => (
            <svg 
                className={className}
                style={style}
                onClick={onClick}
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2"
            >
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                <circle cx="12" cy="12" r="3" />
            </svg>
        );

        // Îàà Í∞ÄÎ¶º ÏïÑÏù¥ÏΩò SVG
        const EyeOffIcon = ({ className, style, onClick }) => (
            <svg 
                className={className}
                style={style}
                onClick={onClick}
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2"
            >
                <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24" />
                <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68" />
                <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61" />
                <line x1="2" y1="2" x2="22" y2="22" />
            </svg>
        );

        function LoginPage() {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [showPassword, setShowPassword] = useState(false);
            const [rememberMe, setRememberMe] = useState(false);
            const [loginType, setLoginType] = useState('runner'); // 'runner' or 'organizer'
            const [isLoading, setIsLoading] = useState(false);
            const [errorMessage, setErrorMessage] = useState('');
            const [successMessage, setSuccessMessage] = useState('');

            const handleLogin = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                setErrorMessage('');
                setSuccessMessage('');

                try {
                    const response = await fetch(`${API_BASE_URL}/login`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            username: username,
                            password: password
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(errorData.message || 'Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. ÏïÑÏù¥ÎîîÏôÄ ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
                    }

                    const data = await response.json();
                    
                    // üîê ÌÜ†ÌÅ∞ Î∞è ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû•
                    localStorage.setItem('accessToken', data.accessToken);
                    localStorage.setItem('tokenType', data.tokenType);
                    localStorage.setItem('userType', loginType);
                    localStorage.setItem('username', username);
                    
                    // userIdÎèÑ Ï†ÄÏû• (ÌöåÏõêÍ∞ÄÏûÖ Ïãú ÏÉùÏÑ±Îêú ID, ÏóÜÏúºÎ©¥ username ÏÇ¨Ïö©)
                    const userId = data.userId || data.id || username;
                    localStorage.setItem('userId', userId);
                    
                    console.log('‚úÖ Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ:', { username, userId, accessToken: data.accessToken });
                    
                    if (rememberMe) {
                        localStorage.setItem('rememberedUsername', username);
                    }

                    setSuccessMessage('Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ! ÌéòÏù¥ÏßÄÎ•º Ïù¥ÎèôÌï©ÎãàÎã§...');
                    
                    // ÏÇ¨Ïö©Ïûê ÌÉÄÏûÖÏóê Îî∞Îùº Îã§Î•∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
                    setTimeout(() => {
                        if (loginType === 'organizer') {
                            window.location.href = 'organizer.html';
                        } else {
                            window.location.href = 'runner.html';
                        }
                    }, 1500);

                } catch (error) {
                    setErrorMessage(error.message);
                    console.error('Î°úÍ∑∏Ïù∏ Ïò§Î•ò:', error);
                } finally {
                    setIsLoading(false);
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-b from-yellow-50 via-amber-50 to-orange-100 relative overflow-hidden">
                    {/* Îñ†Îã§ÎãàÎäî Íµ¨Î¶ÑÎì§ */}
                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                        <div className="absolute top-10 left-10 animate-bounce opacity-30">
                            <CloudIcon className="w-32 h-32 text-orange-200 cloud-shape" />
                        </div>
                        <div className="absolute top-32 right-20 animate-pulse opacity-20">
                            <CloudIcon className="w-40 h-40 text-amber-200 cloud-shape" />
                        </div>
                        <div className="absolute top-64 left-1/3 animate-bounce opacity-25" style={{ animationDelay: '1s' }}>
                            <CloudIcon className="w-36 h-36 text-yellow-200 cloud-shape" />
                        </div>
                        <div className="absolute bottom-32 right-1/4 animate-pulse opacity-20" style={{ animationDelay: '2s' }}>
                            <CloudIcon className="w-44 h-44 text-orange-100 cloud-shape" />
                        </div>
                        <div className="absolute top-1/2 left-10 animate-bounce opacity-25" style={{ animationDelay: '1.5s' }}>
                            <CloudIcon className="w-28 h-28 text-amber-200 cloud-shape" />
                        </div>
                        <div className="absolute bottom-1/4 left-1/2 animate-pulse opacity-20" style={{ animationDelay: '0.5s' }}>
                            <CloudIcon className="w-36 h-36 text-orange-200 cloud-shape" />
                        </div>
                    </div>

                    {/* Ìó§Îçî */}
                    <header className="relative z-10 p-6">
                        <nav className="max-w-6xl mx-auto bg-white/40 backdrop-blur-md rounded-full px-8 py-4 shadow-lg border-2" style={{ borderColor: '#6B4423' }}>
                            <div className="flex items-center justify-between">
                                <div 
                                    className="flex items-center gap-2 cursor-pointer"
                                    onClick={() => window.location.href = 'index.html'}
                                >
                                    <RunnerIcon className="w-8 h-8" style={{ color: '#6B4423' }} />
                                    <span className="text-2xl font-bold" style={{ color: '#6B4423' }}>Îü∞ÎãùÌè¨Ïù∏Ìä∏</span>
                                </div>
                                <div className="flex gap-4 items-center">
                                    <span className="text-sm" style={{ color: '#8B5A3C' }}>Í≥ÑÏ†ïÏù¥ ÏóÜÏúºÏã†Í∞ÄÏöî?</span>
                                    <button 
                                        className="px-6 py-2 rounded-full transition-all duration-300 hover:shadow-lg font-semibold border-2"
                                        style={{ 
                                            color: '#6B4423',
                                            borderColor: '#6B4423',
                                            backgroundColor: 'transparent'
                                        }}
                                        onMouseEnter={(e) => {
                                            e.target.style.backgroundColor = '#6B4423';
                                            e.target.style.color = 'white';
                                        }}
                                        onMouseLeave={(e) => {
                                            e.target.style.backgroundColor = 'transparent';
                                            e.target.style.color = '#6B4423';
                                        }}
                                    >
                                        ÌöåÏõêÍ∞ÄÏûÖ
                                    </button>
                                </div>
                            </div>
                        </nav>
                    </header>

                    {/* Î°úÍ∑∏Ïù∏ Ìèº */}
                    <main className="relative z-10 flex items-center justify-center px-6 py-12">
                        <div className="w-full max-w-md fade-in">
                            <div className="bg-white/70 backdrop-blur-sm rounded-3xl p-10 shadow-2xl" style={{ borderWidth: '2px', borderColor: '#D2B48C' }}>
                                {/* Î°úÍ≥† Î∞è Ï†úÎ™© */}
                                <div className="text-center mb-8">
                                    <RunnerIcon className="w-16 h-16 mx-auto mb-4 animate-bounce" style={{ color: '#8B5A3C' }} />
                                    <h2 className="text-3xl font-bold mb-2" style={{ color: '#6B4423' }}>Î°úÍ∑∏Ïù∏</h2>
                                    <p style={{ color: '#8B5A3C' }}>Îü∞ÎãùÌè¨Ïù∏Ìä∏Ïóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§</p>
                                </div>

                                {/* Î°úÍ∑∏Ïù∏ ÌÉÄÏûÖ ÏÑ†ÌÉù */}
                                <div className="flex gap-3 mb-6">
                                    <button
                                        onClick={() => setLoginType('runner')}
                                        className={`flex-1 py-3 rounded-full font-semibold transition-all duration-300 ${
                                            loginType === 'runner' ? 'text-white shadow-lg' : 'bg-white/50'
                                        }`}
                                        style={loginType === 'runner' ? { backgroundColor: '#6B4423' } : { color: '#8B5A3C' }}
                                    >
                                        Îü¨ÎÑà
                                    </button>
                                    <button
                                        onClick={() => setLoginType('organizer')}
                                        className={`flex-1 py-3 rounded-full font-semibold transition-all duration-300 ${
                                            loginType === 'organizer' ? 'text-white shadow-lg' : 'bg-white/50'
                                        }`}
                                        style={loginType === 'organizer' ? { backgroundColor: '#6B4423' } : { color: '#8B5A3C' }}
                                    >
                                        Ï£ºÏµúÏûê
                                    </button>
                                </div>

                                {/* Î°úÍ∑∏Ïù∏ Ìèº */}
                                <form onSubmit={handleLogin} className="space-y-5">
                                    {/* ÏóêÎü¨ Î©îÏãúÏßÄ */}
                                    {errorMessage && (
                                        <div className="p-4 rounded-full text-white text-center" style={{ backgroundColor: '#DC2626' }}>
                                            {errorMessage}
                                        </div>
                                    )}
                                    
                                    {/* ÏÑ±Í≥µ Î©îÏãúÏßÄ */}
                                    {successMessage && (
                                        <div className="p-4 rounded-full text-white text-center" style={{ backgroundColor: '#059669' }}>
                                            {successMessage}
                                        </div>
                                    )}

                                    {/* ÏÇ¨Ïö©ÏûêÎ™Ö ÏûÖÎ†• */}
                                    <div className="relative">
                                        <MailIcon 
                                            className="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5" 
                                            style={{ color: '#8B5A3C' }}
                                        />
                                        <input
                                            type="text"
                                            placeholder="ÏÇ¨Ïö©ÏûêÎ™Ö ÎòêÎäî Ïù¥Î©îÏùº"
                                            value={username}
                                            onChange={(e) => setUsername(e.target.value)}
                                            className="w-full pl-12 pr-4 py-4 rounded-full bg-white/80 focus:outline-none focus:ring-2 transition-all"
                                            style={{ 
                                                borderWidth: '2px', 
                                                borderColor: '#D2B48C',
                                                color: '#6B4423'
                                            }}
                                            onFocus={(e) => e.target.style.borderColor = '#8B5A3C'}
                                            onBlur={(e) => e.target.style.borderColor = '#D2B48C'}
                                            required
                                            disabled={isLoading}
                                        />
                                    </div>

                                    {/* ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†• */}
                                    <div className="relative">
                                        <LockIcon 
                                            className="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5" 
                                            style={{ color: '#8B5A3C' }}
                                        />
                                        <input
                                            type={showPassword ? 'text' : 'password'}
                                            placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏"
                                            value={password}
                                            onChange={(e) => setPassword(e.target.value)}
                                            className="w-full pl-12 pr-12 py-4 rounded-full bg-white/80 focus:outline-none focus:ring-2 transition-all"
                                            style={{ 
                                                borderWidth: '2px', 
                                                borderColor: '#D2B48C',
                                                color: '#6B4423'
                                            }}
                                            onFocus={(e) => e.target.style.borderColor = '#8B5A3C'}
                                            onBlur={(e) => e.target.style.borderColor = '#D2B48C'}
                                            required
                                            disabled={isLoading}
                                        />
                                        {showPassword ? (
                                            <EyeOffIcon 
                                                className="absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 cursor-pointer" 
                                                style={{ color: '#8B5A3C' }}
                                                onClick={() => setShowPassword(!showPassword)}
                                            />
                                        ) : (
                                            <EyeIcon 
                                                className="absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 cursor-pointer" 
                                                style={{ color: '#8B5A3C' }}
                                                onClick={() => setShowPassword(!showPassword)}
                                            />
                                        )}
                                    </div>

                                    {/* Î°úÍ∑∏Ïù∏ Ïú†ÏßÄ & ÎπÑÎ∞ÄÎ≤àÌò∏ Ï∞æÍ∏∞ */}
                                    <div className="flex items-center justify-between text-sm">
                                        <label className="flex items-center gap-2 cursor-pointer">
                                            <input
                                                type="checkbox"
                                                checked={rememberMe}
                                                onChange={(e) => setRememberMe(e.target.checked)}
                                                className="w-4 h-4 rounded cursor-pointer"
                                                style={{ accentColor: '#6B4423' }}
                                            />
                                            <span style={{ color: '#8B5A3C' }}>Î°úÍ∑∏Ïù∏ Ïú†ÏßÄ</span>
                                        </label>
                                        <a 
                                            href="#" 
                                            className="hover:underline"
                                            style={{ color: '#8B5A3C' }}
                                        >
                                            ÎπÑÎ∞ÄÎ≤àÌò∏ Ï∞æÍ∏∞
                                        </a>
                                    </div>

                                    {/* Î°úÍ∑∏Ïù∏ Î≤ÑÌäº */}
                                    <button 
                                        type="submit"
                                        className="w-full text-white py-4 rounded-full font-bold text-lg transition-all shadow-lg hover:shadow-xl hover:opacity-90 disabled:opacity-50"
                                        style={{ backgroundColor: '#6B4423' }}
                                        disabled={isLoading}
                                    >
                                        {isLoading ? 'Î°úÍ∑∏Ïù∏ Ï§ë...' : 'Î°úÍ∑∏Ïù∏'}
                                    </button>
                                </form>

                                {/* ÏÜåÏÖú Î°úÍ∑∏Ïù∏ */}
                                <div className="mt-8">
                                    <div className="relative">
                                        <div className="absolute inset-0 flex items-center">
                                            <div className="w-full border-t" style={{ borderColor: '#D2B48C' }}></div>
                                        </div>
                                        <div className="relative flex justify-center text-sm">
                                            <span className="px-4 bg-white/70" style={{ color: '#8B5A3C' }}>
                                                ÎòêÎäî Îã§ÏùåÏúºÎ°ú Î°úÍ∑∏Ïù∏
                                            </span>
                                        </div>
                                    </div>

                                    <div className="mt-6 grid grid-cols-2 gap-3">
                                        <button 
                                            className="flex items-center justify-center gap-2 py-3 px-4 rounded-full bg-white/80 hover:bg-white transition-all shadow-md hover:shadow-lg"
                                            style={{ borderWidth: '2px', borderColor: '#D2B48C' }}
                                        >
                                            <svg className="w-5 h-5" viewBox="0 0 24 24">
                                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                                            </svg>
                                            <span style={{ color: '#6B4423', fontSize: '0.9rem', fontWeight: '600' }}>Google</span>
                                        </button>
                                        <button 
                                            className="flex items-center justify-center gap-2 py-3 px-4 rounded-full bg-white/80 hover:bg-white transition-all shadow-md hover:shadow-lg"
                                            style={{ borderWidth: '2px', borderColor: '#D2B48C' }}
                                        >
                                            <svg className="w-5 h-5" viewBox="0 0 24 24" fill="#03C75A">
                                                <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
                                            </svg>
                                            <span style={{ color: '#6B4423', fontSize: '0.9rem', fontWeight: '600' }}>Kakao</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* Ìë∏ÌÑ∞ */}
                    <footer className="relative z-10 py-6 text-center" style={{ color: '#8B5A3C' }}>
                        <CloudIcon className="w-6 h-6 mx-auto mb-2 opacity-50" />
                        <p className="text-xs">¬© 2025 Îü∞ÎãùÌè¨Ïù∏Ìä∏. All rights reserved.</p>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<LoginPage />, document.getElementById('root'));
    </script>
</body>
</html>
